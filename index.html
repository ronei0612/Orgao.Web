<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta http-equiv="Content-Type" content="text/html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" charset="utf-8">
    <title>Órgão</title>
    <link rel="stylesheet" href="./assets/lib/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="./assets/css/w3.css">
    <link rel="stylesheet" href="./assets/css/site.min.css">
    <link rel="stylesheet" href="./assets/css/orgao.min.css">
    <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>

<body id="corpo" class="bg-light text-dark orgao-background">
    <header>
        <div id="linhaVermelha" class="linha-vermelha" style="display:none"></div>
        <nav id="navBar" class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-light border-bottom box-shadow mb-3" style="display:block">
            <div id="linhaNavBar" class="justify-content-sm-around container-sm">

                <button type="button" id="botaoOpcoes" class="input-group-text" onclick="mostrarModal('opcoes')">
                    <img src="./assets/lib/icons/options.svg" width="19" height="19" alt="Options">
                </button>
                <div id="fullscreenDiv">
                <button type="button" class="input-group-text" id="botaoFullscreen" onclick="mudarParaFullscreen()">
                    <i class="bi bi-arrows-fullscreen"></i>
                </button>
                    <button type="button" class="input-group-text" id="exitfullscreen" style="display:none" onclick="sairDeFullscreen()">
                        <img src="./assets/lib/icons/exitFull.svg" width="17" height="17" alt="ExitFull">
                    </button>
                </div>

                <button class="input-group-text" onclick="mostrarModal('instrumento')" id="titulo">
                    Órgão ▼
                </button>

                <h4 id="tituloConfiguracaoTeclas" style="display:none">
                    Configuração
                </h4>

                <h4 id="tituloGravacaoCifras" style="display:none">
                    Gravação
                </h4>

                <button type="button" id="botaoSalvar" class="input-group-text" onclick="mostrarModal('salvar')">
                    <img src="./assets/lib/icons/floppy.svg" width="19" height="19" alt="Salvar">
                </button>

                <div id="switchDarkDiv">
                    <label for="theme" class="theme">
                        <span class="theme__toggle-wrap">
                            <input id="switchDark" class="theme__toggle" type="checkbox" role="switch" name="theme" value="dark" onclick="DarkMode()" />
                            <span class="theme__icon">
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                                <span class="theme__icon-part"></span>
                            </span>
                        </span>
                    </label>
                </div>
                <div id="muteDiv" style="display:none">
                    <button type="button" id="botaoMute" class="input-group-text" dataEventoTecla="eventoClick" onclick="mutarVolume()">
                        <img src="./assets/lib/icons/mute.svg" width="20" height="20" alt="Mute" id="iconVolumeMute" style="display:none">
                        <img src="./assets/lib/icons/volume.svg" width="20" height="20" alt="Volume" id="iconVolume">
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <div id="modal01" class="w3-modal">
        <div class="w3-modal-content">
            <div class="w3-container">
                <div id="botaoFecharModal">
                    <span class="w3-button w3-display-topright" id="spanBotaoFecharModal">
                        <button class="btn btn-close" type="button" onclick="ocultarModal()">
                        </button>
                    </span>
                </div>

                <div id="oracoesEucaristicasDiv" style="display:none">
                    <br />
                    <!-- <partial name="~/Views/Liturgia/OracaoEucaristicaII.cshtml" /> -->
                </div>

                <div id="sobreDiv" style="display:none">
                    <!-- <partial name="~/Views/Orgao/Sobre.cshtml" /> -->
                </div>

                <div id="selectInstrumento">
                    <br />
                    <h4>Instrumento</h4>
                    <br />
                    <select class="form-control" tyle="height:3m" onchange="selecionarInstrumento(false, true)" id="instrumentoSelect">
                        <option selected value="Órgão">Órgão</option>
                        <option value="Banda">Banda</option>
                        <!-- @* <option value="Strings">Strings</option> *@
                        @* <option value="Bateria">Só Bateria</option> *@ -->
                    </select>
                    <br />
                </div>

                <div id="selectOpcoes">
                    <br />
                    <h4>Menu</h4>
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link orgao" asp-area="" asp-controller="Home" asp-action="Index">Início</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link orgao" onclick="mostrarLiturgiaDiaria()">Liturgia Diária</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link orgao" onclick="mostrarModal('oracoesEucaristicas')">Orações Eucarísticas</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link orgao" onclick="mostrarModal('configuracaoOpcoes')">Configuração</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link orgao" asp-area="" asp-controller="Youtube" asp-action="Index">Youtube</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link orgao" asp-area="" asp-controller="Sugestoes" asp-action="Index">Sugestões</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link orgao" onclick="mostrarModal('sobre')">Sobre</a>
                        </li>
                    </ul>
                </div>

                <div id="selectConfiguracao" style="display:none">
                    <br />
                    <h4>Configuração das Teclas</h4>
                    <br />
                    <a href="#" class="nav-link orgao" onclick="mostrarModal('configuracao')">Configurar as Teclas pelo teclado físico</a>
                    <a href="#" class="nav-link orgao" onclick="limparConfiguracaoTeclas()">Limpar as Configurações de Teclas</a>
                    <a href="#" class="nav-link orgao" onclick="limparConfiguracaoTodas()">Limpar TODAS as Configurações do site</a>
                    <br />
                </div>

                <div id="tecladoTeclasDiv" style="display:none">
                    <br />
                    <h4>Configuração das Teclas</h4>
                    Digite a tecla que irá pressionar esse botão:
                    <br />
                    <p style="font-weight: bold" id="inputTeclaLabel"></p>
                    <button id="botaoOkTecla" class="btn btn-primary" type="button" onclick="armazenarTeclaConfiguracaoTeclas()" disabled>
                        Ok
                    </button>
                    <br /><br />
                </div>

                <div id="compartilharDiv">
                    <br />
                    <h4>Compartilhar Salvamentos</h4>
                    Link do arquivo criado no seu Google Drive:
                    <br />
                    <a id="arquivoIdLink" href="" target="_blank"></a>
                    <br />
                    <br />
                    Compartilhamento <span id="nomeCompartilhamentoSpan"></span>
                    <div id="arquivoIdText"></div>
                    <br />
                    <button class="btn btn-primary" type="button" onclick="mostrarSalvamentoCompartilhado()">
                        Compartilhar
                    </button>
                    <br />
                    <br />
                </div>

                <div id="salvarDiv">
                    <br />
                    <h4>Salvamentos
                        <button class="btn btn-light me-1" type="button" onclick="trocarSalvamento()">
                            <i class="bi bi-arrow-left-right"></i>
                        </button>
                        <button class="btn btn-secondary me-1" type="button" onclick="compartilhar_Salvamentos()">
                            <i class="bi bi-share"></i>
                        </button>
                    </h4>

                    <div id="compartilhadoDiv">
                        Conjunto:
                        <br />
                        <div class="d-flex">
                            <select class="form-control me-1" tyle="height:3m" id="selectConjuntoSalvamento" onchange="carregarSalvamentosList(this.value)">
                                <option selected value="salvamentosv2">Nesse dispositivo</option>
                                <option value="compartilhados">Compartilhado</option>
                            </select>
                            <button class="btn btn-danger me-1" type="button" onclick="deletarSalvamento(true)">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                        <br />
                    </div>
                    
                    Selecionar salvamento:
                    <br />
                    <select class="form-control" tyle="height:3m" id="selectSalvamento">
                        <option selected value=""></option>
                    </select>
                    <br />

                    <button class="btn btn-warning" type="button" onclick="novoSalvamento()">
                        <i class="bi bi-plus-lg"></i>
                    </button>

                    <button class="btn btn-success" type="button" onclick="editarSalvamento()">
                        <i class="bi bi-pencil"></i>
                    </button>

                    <button class="btn btn-danger" type="button" onclick="deletarSalvamento()">
                        <i class="bi bi-trash"></i>
                    </button>

                    <button class="btn btn-primary" type="button" onclick="salvarSalvamento()">
                        <i class="bi bi-download"></i>
                        Salvar
                    </button>

                    <button class="btn btn-primary" type="button" onclick="carregar_Salvamento()">
                        <i class="bi bi-upload"></i>
                        Carregar
                    </button>
                    <br /><br />
                </div>

                <div id="modalGravar">
                    <br />
                    <h4>Cifras</h4>
                    <div id="botoesGravacao" style="display: none">
                        Selecionar gravação:
                        <br />
                        <select class="form-control" tyle="height:3m" id="selectGravacao">
                            <option selected value=""></option>
                        </select>

                        <button class="btn btn-success" type="button" onclick="novaGravacao()">
                            <i class="bi bi-plus-square"></i>
                        </button>

                        <button class="btn btn-danger" type="button" onclick="deletarGravacao()">
                            <i class="bi bi-trash"></i>
                        </button>
                        <br /><br />

                    </div>
                    <label for="musicaSearch">Pesquisar música:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="" aria-label="Pesquisar" aria-describedby="basic-addon1" name="texto" id="musicaSearch">
                        <span class="input-group-text" id="basic-addon1" onclick="pesquisarMusica()">
                            <i class="bi bi-search"></i>
                        </span>
                    </div>
                    <br />
                    <div id="linksCifraClubList" style="display:block">
                        <div class="list-group" id="listaMusicasCifra">                            
                        </div>
                    </div>
                    <div id="escreverCifraTextArea">
                        <label for="musicaAcordesTextArea">Escrever cifra:</label>
                        <textarea class="form-control" id="musicaAcordesTextArea" rows="9" style="font-size: 13pt; font-family: 'Roboto Mono','Courier New','Courier',monospace; line-height: 1.6; tab-size: 8"></textarea>
                    </div>
                    <br />
                    <label for="formFile" class="form-label">Importar partitura (imagem):</label>
                    <div class="d-flex align-items-center">
                        <input class="form-control" type="file" id="formFile" onchange="escolherArquivo(event)">
                        <button b-c3rtqodnk9="" class="btn btn-close me-1" type="button" onclick="document.getElementById('formFile').value = ''"></button>
                    </div>
                    <br />

                    <div class="d-flex align-items-center">
                        <button id="botaoIniciar" class="btn btn-primary me-1" type="button" onclick="iniciarCifra()">
                            Iniciar
                        </button>
                        <button class="btn btn-secondary me-1" type="button" onclick="gravarCifra()">
                            Escrever cifras
                        </button>
                        <button class="btn btn-secondary me-1" type="button" id="btnAfinador" onclick="mostrarAfinador()">
                            Afinador
                        </button>
                    </div>
                    
                    <div id="tunerDiv" style="display:none">
                        <!-- <partial name="~/Views/Orgao/Tuner.cshtml" /> -->
                    </div>
                    <br />
                    <br />
                </div>
            </div>
        </div>
    </div>

    <div>
        <main role="main" class="pb-3">
            <div id="tracker-container" style="display:none">
                <div id="container" class="container d-sm-flex" style="display:none">
                    <div class="box" id="orgaoBox">
                        <div id="linhaSelectTom" class="d-flex align-items-center justify-content-center">
                            <div class="d-flex align-items-center">
                                <div class="d-flex">
                                    <input class="btn btn-link me-1" type="button" id="voltar" value="&laquo; Voltar" onclick="voltarParaOrgao()" style="display:none">
                                    <button class="btn btn-primary me-1" id="diminuirTomMenos" type="button" ondblclick="aumentarTom_clickDuplo(false)" dataEventoTecla="eventoClick" onclick="aumentarTom_click(false)">
                                        <i class="bi bi-dash-lg"></i>
                                    </button>
                                    <select class="form-control me-1" id="tomSelect" onchange="prepararMudarTomCifra(this.value)" dataEventoTecla="eventoClick" onclick="pegarTomCifra(this.value)" style="text-align-last:center">
                                    </select>
                                    <button class="btn btn-primary me-1" id="aumentarTomMais" type="button" ondblclick="aumentarTom_clickDuplo(true)" dataEventoTecla="eventoClick" onclick="aumentarTom_click(true)">
                                        <i class="bi bi-plus-lg"></i>
                                    </button>
                                </div>
            
                            </div>
                            <div class="form-check form-switch naoSelecionarTexto" id="tomMenorSwitchDiv">
                                <input class="form-check-input" type="checkbox" role="switch" id="tomMenorSwitch" dataEventoTecla="eventoChange" onchange="selecionarTomMenor(this.checked)">
                                <label for="tomMenorSwitch" class="form-check-label" id="textoAcordeMenor">
                                    
                                </label>
                            </div>
                            <button class="btn btn-light border-primary me-1" type="button" onclick="" style="display:none">
                                <span style="color:#85AFEB">▲▼</span>
                            </button>
                        </div>
            
                        <div id="textoCifrasFrame" style="display:none">
                            <iframe id="textoCifras" style="width:100%; display:none"></iframe>
                            <iframe id="partituraFrame" style="width:100%; display:none"></iframe>
                            <iframe id="liturgiaDiariaFrame" src="https://liturgiadiaria.edicoescnbb.com.br/" style="width:100%; display:none"></iframe>
                        </div>
            
                        <div class="d-flex align-items-center centralizado-no-container" id="orgaoTable">
                            <!-- @* <table id="orgaoTable" style="margin-left: -12px"> *@ -->
                            <table id="tableOrgao">
                                <tr class="orgaoControles" id="orgaoControle">
                                    <td>
                                        <div class="form-check naoSelecionarTexto" id="acompCheckDiv">
                                            <input class="form-check-input me-1" type="checkbox" value="" id="acompCheck" style="width:1.5em;margin-left:-0.5em" dataEventoTecla="eventoChange" onchange="mostrarBateria(this.checked)">
                                            <br />Acomp
                                        </div>
                                    </td>
                                    <td>
                                        <button id="botaoBuscar" data-playing="false" class="botao parar" onclick="mostrarModal('gravar')">
                                            <i class="bi bi-search"></i>
                                        </button>
                                        <button id="play_pause" data-playing="false" class="botao parar" dataEventoTecla="eventoClick" onclick="escolherAcorde('', this)" style="display:none">
                                            <i class="bi bi-stop-fill"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <button id="stringsBotao" class="botao instrumento"
                                            onmousedown="escolherAcompanhamentoBateria(this, '_stringsSelecionado')"
                                            dataeventotecla="eventoTouchstart"
                                            ontouchstart="handleTouchStart(event, this)">
                                            <img id="violinoDesenho" height="35px" width="35px" src="assets/lib/icons/violin.svg">
                                        </button>
                                    </td>
                                
                                    <td id="tdVolume" rowspan="5" colspan="">
                                        <div class="naoSelecionarTexto" style="display: flex; align-items: center" id="volumeDiv">
                                            <input type="range" id="volumeInput" orient="vertical" min="0" max="1" value="0.9" step="0.1" oninput="alterarVolume(this.value, 0.9)">
                                            <div id="textoVolume" class="textoVertical">Volume <span id="volumeTexto">9</span></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr id="gravarCifrasControle" style="display:none">
                                    <td colspan="4">
                                        <input type="text" class="form-control" id="textoGravarCifras">
                                    </td>
                                    <td></td>
                                    <td>
                                    </td>
                                </tr>
                                
                                <tr class="orgaoBotoes">
                                    <td><input type="button" class="botao azul acorde" id="acorde_0" value="C" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('C', this)"></td>
                                    <td><input type="button" class="botao vermelho acorde" id="acorde_3" value="F" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('F', this)"></td>
                                    <td><input type="button" class="botao amarelo acorde" id="acorde_4" value="G" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('G', this)"></td>
                                    <td></td>
                                </tr>
                                <tr class="orgaoBotoes">
                                    <td><input type="button" class="botao roxo acorde" id="acorde_5" value="Am" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('Am', this)"></td>
                                    <td><input type="button" class="botao rosa acorde" id="acorde_1" value="Dm" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('Dm', this)"></td>
                                    <td><input type="button" class="botao marrom acorde" id="acorde_2" value="Em" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('Em', this)"></td>
                                </tr>
                                <tr class="orgaoBotoes">
                                    <td><input id="acorde_9" style="display:none" type="button" class="botao roxoClaro acorde" value="A" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('A', this)"></td>
                                    <td><input id="acorde_7" style="display:none" type="button" class="botao rosaClaro acorde" value="D" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('D', this)"></td>
                                    <td><input id="acorde_10" style="display:none" type="button" class="botao marromClaro acorde" value="E" dataEventoTecla="eventoMouseup" onmouseup="escolherAcorde('E', this)"></td>
                                </tr>
                                
                                <tr id="orgaoCifrasBotoes" style="display:none">
                                    <td>
                                        <button class="botao vermelho acorde" onmousedown="avancarCifra('retroceder', this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this)" id="cifraRetroceder">
                                            <i class="bi bi-skip-backward-fill"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <button class="botao marrom acorde" onmousedown="avancarCifra('repetir', this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this)" id="cifraRepetir">
                                            <i class="bi bi-arrow-clockwise"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <button class="botao azul acorde" onmousedown="avancarCifra('avancar', this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this)" id="cifraAvancar">
                                            <i class="bi bi-play-fill"></i>
                                        </button>
                                    </td>
                                </tr>
                                
                                <tr class="botoesAcompanhamentosRitmo">
                                    <td>
                                        <button id="baixo" class="botao dedo" onmousedown="escolherAcompanhamentoOrgao('baixo', this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this)">
                                            <img src="assets/lib/icons/handLeft.svg" width="28" height="28">
                                        </button>
                                                                        
                                        <button id="pianoBotao" class="botao dedo"
                                            onmousedown="escolherAcompanhamentoBateria(this, '_epianoSelecionado')"
                                            dataeventotecla="eventoTouchstart"
                                            ontouchstart="handleTouchStart(event, this)" style="display:none">
                                            <img src="assets/lib/icons/piano.svg" width="35" height="35">
                                    </td>
                                    <td>
                                        <button id="mao" class="botao mao" onmousedown="escolherAcompanhamentoOrgao('mao', this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this)">
                                            <img src="assets/lib/icons/handRight.svg" width="28" height="28">
                                        </button>
                                
                                        <button id="baixoBotao" class="botao dedo"
                                            onmousedown="escolherAcompanhamentoBateria(this, '_baixoSelecionado')"
                                            dataeventotecla="eventoTouchstart"
                                            ontouchstart="handleTouchStart(event, this, true)" style="display:none">
                                            <img src="assets/lib/icons/bass.svg" width="35" height="35">
                                        </button>
                                    </td>
                                    <td>
                                        <button id="full" class="botao duasmaos" onmousedown="escolherAcompanhamentoOrgao('full', this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this)">
                                            <img src="assets/lib/icons/hands.svg" width="50" height="30">
                                        </button>
                                
                                        <button id="violaoBotao" class="botao dedo"
                                            onmousedown="escolherAcompanhamentoBateria(this, '_violaoSelecionado')"
                                            dataeventotecla="eventoTouchstart"
                                            ontouchstart="handleTouchStart(event, this, true)" style="display:none">
                                            <img src="assets/lib/icons/guitarAcoustic.svg" width="35" height="35">
                                        </button>
                                    </td>
                                </tr>
                                
                                <div class="modal" id="modal_loading" data-backdrop="static" style="display:none">
                                    <div class="modal-dialog modal-sm">
                                        <div class="modal-content">
                                            <div class="modal-body text-center">
                                                <div class="loading-spinner mb-2"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </table>
                        </div>
                    </div>
            
                    <div class="box d-sm-flex" id="bateriaBox">
                        <div class="centralizado-no-container pure-form">
                            <div id="bateriaBotoes" style="display:none">
                                <table id="tableRitmo" class="justify-content-center">
                                    <tr>
                                        <td>
                                            <div class="form-check naoSelecionarTexto" id="autoCheckDiv">
                                                <input class="form-check-input me-1" type="checkbox" value="" id="autoCheck" dataEventoTecla="eventoChange" style="width:1.5em;margin-left:-0.5em">
                                                Auto<br />Ritmo
                                            </div>
                                        </td>
                                        <td style="position: relative">
                                            <div class="light" id="lightCompasso"></div>
                                            <button id="play_pause_bateria" data-playing="false" class="botao parar" onmousedown="playBotaoBateria(this, false)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this)">
                                                <img src="assets/lib/icons/playPause.svg" width="26" height="26" id="prepararBateriaBotao">
                        
                                                <i class="bi bi-stop-fill" style="display:none" id="pararBateriaBotao"></i>
                                            </button>
                                        </td>
                                        <td>
                                            <select class="form-control" onchange="selecionarInstrumento(true)" id="selectRitmo" style="height:45px;width:93px;font-size:18px">
                                                <option selected value=""></option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr class="trCravoBotoes" style="display:none">
                                        <td>
                                            <button id="brushCravo" class="botao dedo" onmousedown="playBotaoBateria(this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/brush.svg" width="35" height="35">
                                            </button>
                                        </td>
                                        <td>
                                            <button id="cravo" class="botao dedo" onmousedown="playBotaoBateria(this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/harpsichord.svg" width="32" height="32">
                                            </button>
                                        </td>
                                        <td>
                                            <button id="pratoCravo" class="botao amarelo parar" onmousedown="pressionarBotao(this, false)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/chimes.svg" width="32" height="32" id="iconChimesCravo">
                                                <img src="assets/lib/icons/cymbals.svg" width="32" height="32" id="iconPratoCravo" style="display:none">
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="trBateriaBotoes">
                                        <td>
                                            <button id="brush" class="botao dedo" onmousedown="playBotaoBateria(this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/brush.svg" width="35" height="35">
                                            </button>
                                        </td>
                                        <td>
                                            <button id="aro" class="botao dedo" onmousedown="playBotaoBateria(this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/hoop.svg" width="35" height="35">
                                            </button>
                                        </td>
                                        <td>
                                            <button id="caixa" class="botao dedo" onmousedown="playBotaoBateria(this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/snare.svg" width="35" height="35">
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="trBateriaBotoes">
                                        <td>
                                            <button id="chimbal" class="botao dedo" onmousedown="playBotaoBateria(this)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/snare.svg" width="32" height="32">
                                            </button>
                                        </td>
                                        <td>
                                            <button id="ride" class="botao dedo" style="display:none">
                                            </button>
                                            <button id="meiaLua" class="botao dedo" onmousedown="playBotaoBateria(this)"
                                                dataEventoTecla="eventoTouchstart"
                                                ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/halfMoon.svg" width="35" height="35">
                                            </svg>
                                            </button>
                                        </td>
                                        <td>
                                            <button id="prato" class="botao amarelo parar" onmousedown="pressionarBotao(this, false)" dataEventoTecla="eventoTouchstart" ontouchstart="handleTouchStart(event, this, true)">
                                                <img src="assets/lib/icons/chimes.svg" width="32" height="32" id="iconChimes">
                                                <img src="assets/lib/icons/cymbals.svg" width="32" height="32" id="iconPrato" style="display:none">
                                            </button>
                                        </td>
                                    </tr>
                                </table>
                        
                                <form class="pure-form" id="trackerControls">
                                    <div class="d-flex align-items-center justify-content-center">
                                        <!-- @* <label for="bpm" class="naoSelecionarTexto me-1" ontouchstart="mostrarBateriaConfig(true)" ontouchend="mostrarBateriaConfig(false)">Temp:</label><input name="bpm" id="bpm" style="width: 50px" value="90" class="form-control me-1" onchange="mudarTempoCompasso()" onblur="mudarTempoCompasso(false)"> *@ -->
                                        <label for="bpm" class="naoSelecionarTexto me-1" onclick="clicarUmBotaoTempo(parseInt(document.getElementById('bpm').value) + 5)">Temp:</label><input name="bpm" id="bpm" style="width: 50px" value="90" class="form-control me-1" onchange="mudarTempoCompasso()" onblur="mudarTempoCompasso(false)">
                                        <button class="btn btn-success me-1" type="button" onclick="clicarUmBotaoTempo(60)">
                                            60
                                        </button>
                                        <button class="btn btn-success me-1" type="button" onclick="clicarUmBotaoTempo(70)">
                                            70
                                        </button>
                                        <button class="btn btn-success me-1" type="button" onclick="clicarUmBotaoTempo(80)">
                                            80
                                        </button>
                                        <button class="btn btn-success me-1" type="button" onclick="clicarUmBotaoTempo(90)">
                                            90
                                        </button>
                                    </div>
                        
                                    <input id="bpmRange" type="range" class="form-range rangeVerde" max="100" min="50" step="1" value="90" onchange="mudarTempoCompasso(true)">
                                </form>
                                <div id="bateria" style="display:none">
                                    <div>
                                        <label for="measureLengthSelect">Compasso:</label>
                                        <select name="measureLengthSelect" id="measureLengthSelect" aria-label="Compasso">
                                            <option value="6">3/4</option>
                                            <option selected value="8">4/4</option>
                                            <option value="12">6/8</option>
                                        </select>
                                        <input class="base" name="measureLength" id="measureLength" style="width: 60px;" value="16">
                                    </div>
                        
                                    <div id="tracker-parent">
                                        <table id="tracker-table">
                                        </table>
                                    </div>
                                    <div id="tracker-controls">
                                        <div style="display:none">
                                            <button id="play">Play</button>
                                            <button id="pause">Pause</button>
                                            <button id="stop">Stop</button>
                                            <br>
                                        </div>
                                    </div>
                                    <br />
                                    <button onclick="escreverRitmo()">Get Ritmo</button>
                                    <div id="textoRitmo"></div>
                        
                                    <div style="display:none">
                                        <hr>
                                        <form class="pure-form">
                                            <input type="text" id="filename"><br>
                                            <button id="save">Save as </button><button id="saveAsJson">Get JSON</button> <br>
                        
                                            <span id="load-storage"><select id="beat-list"><option value="Select">Select</option></select></span>
                                            <button id="delete">Delete selected</button>
                                        </form>
                                    </div>
                                </div>
                        
                                <div id="mensagens" style="display:none">
                                </div>
                        
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!--<button id="startButton">Iniciar Transmissão</button>
    <button id="stopButton" disabled>Parar Transmissão</button>-->
    
<script src="./assets/lib/jquery/dist/jquery.min.js"></script>
<script src="./assets/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="./assets/js/crypto-js.min.js"></script>
<script src="./assets/js/google.min.js"></script>
<script src="./assets/js/Pizzicato.min.js"></script>
<script>
    //Impedir atualização errônea da página
    // window.onbeforeunload = function () {
    //     return "Deseja recarregar página?";
    // };

    //selectRitmo.selectedIndex = 2;

    
    const notasAcordesJson = JSON.parse('{"C":["c","e","g"],"C4":["c","f","g"],"C5+":["c","e","g#"],"C6":["c","e","g","a"],"C7":["c","e","g","a#"],"C7M":["c","e","g","b"],"C9":["c","e","g","d"],"C°":["c","d#","f#"],"C°7":["c","d#","f#","a#"],"Cm":["c","d#","g"],"Cm5+":["c","d#","g#"],"Cm6":["c","d#","g","a"],"Cm7":["c","d#","g","a#"],"Cm7M":["c","d#","g","b"],"C#":["c#","f","g#"],"C#4":["c#","f#","g#"],"C#5+":["c#","f","a"],"C#6":["c#","f","g#","a#"],"C#7":["c#","f","g#","b"],"C#7M":["c#","f","g#","c"],"C#9":["c#","f","g#","d#"],"C#°":["c#","e","g"],"C#°7":["c#","e","g","b"],"C#m":["c#","e","g#"],"C#m5+":["c#","e","a"],"C#m6":["c#","e","g#","a#"],"C#m7":["c#","e","g#","b"],"C#m7M":["c#","e","g#","c"],"D":["d","f#","a"],"D4":["d","g","a"],"D5+":["d","f#","a#"],"D6":["d","f#","a","b"],"D7":["d","f#","a","c"],"D7M":["d","f#","a","c#"],"D9":["d","f#","a","e"],"D°":["d","f","g#"],"D°7":["d","f","g#","c"],"Dm":["d","f","a"],"Dm5+":["d","f","a#"],"Dm6":["d","f","a","b"],"Dm7":["d","f","a","c"],"Dm7M":["d","f","a","c#"],"D#":["d#","g","a#"],"D#4":["d#","g#","a#"],"D#5+":["d#","g","b"],"D#6":["d#","g","a#","c"],"D#7":["d#","g","a#","c#"],"D#7M":["d#","g","a#","d"],"D#9":["d#","g","a#","f"],"D#°":["d#","f#","a"],"D#°7":["d#","f#","a","c#"],"D#m":["d#","f#","a#"],"D#m5+":["d#","f#","b"],"D#m6":["d#","f#","a#","c"],"D#m7":["d#","f#","a#","c#"],"D#m7M":["d#","f#","a#","d"],"E":["e","g#","b"],"E4":["e","a","b"],"E5+":["e","g#","c"],"E6":["e","g#","b","c#"],"E7":["e","g#","b","d"],"E7M":["e","g#","b","d#"],"E9":["e","g#","b","f#"],"E°":["e","g","a#"],"E°7":["e","g","a#","d"],"Em":["e","g","b"],"Em5+":["e","g","c"],"Em6":["e","g","b","c#"],"Em7":["e","g","b","d"],"Em7M":["e","g","b","d#"],"F":["f","a","c"],"F4":["f","a#","c"],"F5+":["f","a","c#"],"F6":["f","a","c","d"],"F7":["f","a","c","d#"],"F7M":["f","a","c","e"],"F9":["f","a","c","g"],"F°":["f","g#","b"],"F°7":["f","g#","b","d#"],"Fm":["f","g#","c"],"Fm5+":["f","g#","c#"],"Fm6":["f","g#","c","d"],"Fm7":["f","g#","c","d#"],"Fm7M":["f","g#","c","e"],"F#":["f#","a#","c#"],"F#4":["f#","b","c#"],"F#5+":["f#","a#","d"],"F#6":["f#","a#","c#","d#"],"F#7":["f#","a#","c#","e"],"F#7M":["f#","a#","c#","f"],"F#9":["f#","a#","c#","g#"],"F#°":["f#","a","c"],"F#°7":["f#","a","c","e"],"F#m":["f#","a","c#"],"F#m5+":["f#","a","d"],"F#m6":["f#","a","c#","d#"],"F#m7":["f#","a","c#","e"],"F#m7M":["f#","a","c#","f"],"G":["g","b","d"],"G4":["g","c","d"],"G5+":["g","b","d#"],"G6":["g","b","d","e"],"G7":["g","b","d","f"],"G7M":["g","b","d","f#"],"G9":["g","b","d","a"],"G°":["g","a#","c#"],"G°7":["g","a#","c#","f"],"Gm":["g","a#","d"],"Gm5+":["g","a#","d#"],"Gm6":["g","a#","d","e"],"Gm7":["g","a#","d","f"],"Gm7M":["g","a#","d","f#"],"G#":["g#","c","d#"],"G#4":["g#","c#","d#"],"G#5+":["g#","c","e"],"G#6":["g#","c","d#","f"],"G#7":["g#","c","d#","f#"],"G#7M":["g#","c","d#","g"],"G#9":["g#","c","d#","a#"],"G#°":["g#","b","d"],"G#°7":["g#","b","d","f#"],"G#m":["g#","b","d#"],"G#m5+":["g#","b","e"],"G#m6":["g#","b","d#","f"],"G#m7":["g#","b","d#","f#"],"G#m7M":["g#","b","d#","g"],"A":["a","c#","e"],"A4":["a","d","e"],"A5+":["a","c#","f"],"A6":["a","c#","e","f#"],"A7":["a","c#","e","g"],"A7M":["a","c#","e","g#"],"A9":["a","c#","e","b"],"A°":["a","c","d#"],"A°7":["a","c","d#","g"],"Am":["a","c","e"],"Am5+":["a","c","f"],"Am6":["a","c","e","f#"],"Am7":["a","c","e","g"],"Am7M":["a","c","e","g#"],"A#":["a#","d","f"],"A#4":["a#","d#","f"],"A#5+":["a#","d","f#"],"A#6":["a#","d","f","g"],"A#7":["a#","d","f","g#"],"A#7M":["a#","d","f","a"],"A#9":["a#","d","f","c"],"A#°":["a#","c#","e"],"A#°7":["a#","c#","e","g#"],"A#m":["a#","c#","f"],"A#m5+":["a#","c#","f#"],"A#m6":["a#","c#","f","g"],"A#m7":["a#","c#","f","g#"],"A#m7M":["a#","c#","f","a"],"B":["b","d#","f#"],"B4":["b","e","f#"],"B5+":["b","d#","g"],"B6":["b","d#","f#","g#"],"B7":["b","d#","f#","a"],"B7M":["b","d#","f#","a#"],"B9":["b","d#","f#","c#"],"B°":["b","d","f"],"B°7":["b","d","f","a"],"Bm":["b","d","f#"],"Bm5+":["b","d","g"],"Bm6":["b","d","f#","g#"],"Bm7":["b","d","f#","a"],"Bm7M":["b","d","f#","a#"]}');
    const acordesCampoHarmonicoJson = JSON.parse('{"C":["C","Dm","Em","F","G","Am","Bb","D","Cm","A","E"],"C#":["C#","D#m","E#m","F#","G#","A#m","B","D#","C#m","A#","E#"],"D":["D","Em","F#m","G","A","Bm","C","E","Dm","B","F#"],"D#":["D#","Fm","Gm","G#","A#","Cm","C#","F","D#m","C","G"],"E":["E","F#m","G#m","A","B","C#m","D","F#","Em","C#","G#"],"F":["F","Gm","Am","Bb","C","Dm","Eb","G","Fm","D","A"],"F#":["F#","G#m","A#m","B","C#","D#m","E","G#","F#m","D#","A#"],"G":["G","Am","Bm","C","D","Em","F","A","Gm","E","B"],"G#":["G#","Bbm","Cm","C#","D#","Fm","F#","A#","G#m","F","C"],"A":["A","Bm","C#m","D","E","F#m","G","B","Am","F#","C#"],"A#":["A#","Cm","Dm","D#","F","Gm","G#","C","A#m","G","D"],"B":["B","C#m","D#m","E","F#","G#m","A","C#","Bm","G#","D#"],"Am":["C","Dm","Em","F","G","Am","A","E","","",""],"A#m":["C#","D#m","E#m","F#","G#","A#m","A#","E#","","",""],"Bm":["D","Em","F#m","G","A","Bm","B","F#","","",""],"Cm":["Eb","Fm","Gm","Ab","Bb","Cm","C","G","","",""],"C#m":["E","F#m","G#m","A","B","Cm","C#","G#","","",""],"Dm":["F","Gm","Am","Bb","C","Dm","D","A","","",""],"D#m":["F#","G#m","A#m","C","C#","D#m","D#","A#","","",""],"Em":["G","Am","Bm","C","D","Em","E","B","","",""],"Fm":["Ab","Bbm","Cm","Db","Eb","Fm","F","C","","",""],"F#m":["A","Bm","C#m","D","E","F#m","F#","C#","","",""],"Gm":["Bb","Cm","Dm","Eb","F","Gm","G","D","","",""],"G#m":["B","C#m","D#m","E","F#","G#m","G#","D#","","",""]}');
    const acidentesCorrespondentesJson = JSON.parse('{"Cb":"B","C":"C","C#":"C#","Db":"C#","D":"D","D#":"D#","Eb":"D#","E":"E","E#":"F","Fb":"E","F":"F","F#":"F#","Gb":"F#","G":"G","G#":"G#","Ab":"G#","A":"A","A#":"A#","Bb":"A#","B":"B","B#":"C"}');
	const acordesTons = Object.keys(acordesCampoHarmonicoJson);
	const tonsMaiores = 'C, C#, D, D#, E, F, F#, G, G#, A, A#, B'.split(', ');
	const tonsMenores = '"Am", "A#m", "Bm", "Cm", "C#m", "Dm", "D#m", "Em", "Fm", "F#m", "Gm", "G#m"'.split(', ');

    var audioPath = './assets/audio/';
    if (location.origin.includes('file:'))
        audioPath = 'https://roneicostasoares.com.br/Orgao.Web/assets/audio/';

	localStorage.setItem('notasAcordesJson', JSON.stringify(notasAcordesJson));

	 var acordes = {
	 	'orgao_c': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_c.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_c#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_c_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_d': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_d.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_d#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_d_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_e': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_e.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_f': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_f.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_f#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_f_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_g': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_g.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_g#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_g_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_a': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_a.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_a#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_a_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_b': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_b.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		
		'orgao_c_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_c_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_c#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_c__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_d_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_d_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_d#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_d__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_e_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_e_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_f_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_f_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_f#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_f__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_g_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_g_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_g#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_g__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_a_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_a_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_a#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_a__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_b_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_b_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),

		'orgao_c_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_c_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_c#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_c__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_d_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_d_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_d#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_d__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_e_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_e_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_f_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_f_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_f#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_f__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_g_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_g_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_g#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_g__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_a_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_a_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_a#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_a__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'orgao_b_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Orgao/orgao_b_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),

		'epiano_c': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_c.ogg' } }),
		'epiano_c#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_c_.ogg' } }),
		'epiano_d': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_d.ogg' } }),
		'epiano_d#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_d_.ogg' } }),
		'epiano_e': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_e.ogg' } }),
		'epiano_f': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_f.ogg' } }),
		'epiano_f#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_f_.ogg' } }),
		'epiano_g': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_g.ogg' } }),
		'epiano_g#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_g_.ogg' } }),
		'epiano_a': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_a.ogg' } }),
		'epiano_a#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_a_.ogg' } }),
		'epiano_b': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_b.ogg' } }),

		'epiano_c_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_c_baixo.ogg' } }),
		'epiano_c#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_c__baixo.ogg' } }),
		'epiano_d_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_d_baixo.ogg' } }),
		'epiano_d#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_d__baixo.ogg' } }),
		'epiano_e_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_e_baixo.ogg' } }),
		'epiano_f_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_f_baixo.ogg' } }),
		'epiano_f#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_f__baixo.ogg' } }),
		'epiano_g_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_g_baixo.ogg' } }),
		'epiano_g#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_g__baixo.ogg' } }),
		'epiano_a_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_a_baixo.ogg' } }),
		'epiano_a#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_a__baixo.ogg' } }),
		'epiano_b_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_b_baixo.ogg' } }),

		'epiano_c_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_c_grave.ogg' } }),
		'epiano_c#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_c__grave.ogg' } }),
		'epiano_d_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_d_grave.ogg' } }),
		'epiano_d#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_d__grave.ogg' } }),
		'epiano_e_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_e_grave.ogg' } }),
		'epiano_f_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_f_grave.ogg' } }),
		'epiano_f#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_f__grave.ogg' } }),
		'epiano_g_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_g_grave.ogg' } }),
		'epiano_g#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_g__grave.ogg' } }),
		'epiano_a_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_a_grave.ogg' } }),
		'epiano_a#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_a__grave.ogg' } }),
		'epiano_b_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Epiano/epiano_b_grave.ogg' } }),

		'strings_c': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_c.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_c#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_c_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_d': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_d.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_d#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_d_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_e': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_e.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_f': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_f.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_f#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_f_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_g': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_g.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_g#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_g_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_a': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_a.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_a#': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_a_.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_b': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_b.ogg', loop: true, release: 0.5, attack: 0.1 } }),

		'strings_c_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_c_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_c#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_c__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_d_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_d_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_d#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_d__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_e_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_e_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_f_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_f_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_f#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_f__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_g_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_g_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_g#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_g__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_a_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_a_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_a#_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_a__baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_b_baixo': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_b_baixo.ogg', loop: true, release: 0.5, attack: 0.1 } }),

		'strings_c_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_c_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_c#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_c__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_d_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_d_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_d#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_d__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_e_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_e_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_f_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_f_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_f#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_f__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_g_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_g_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_g#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_g__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_a_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_a_grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_a#_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_a__grave.ogg', loop: true, release: 0.5, attack: 0.1 } }),
		'strings_b_grave': new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Strings/strings_b_grave.ogg', loop: true, release: 0.5, attack: 0.1 } })
	 };

	var pratoSound = new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Percussao/prato.ogg' } });
	var chimesSound = new Pizzicato.Sound({ source: 'file', options: { path: audioPath + 'Percussao/chimes.ogg' } });

	function mostrarCompartilhado() {
        //Comentado para funcionar por enquanto
		// if ('@Model.CompartilhadoNome' !== '') {
		// 	if ('@Model.CompartilhadoNome' === 'Erro')
		// 		alert('Ocorreu um erro ao mostrar compartilhamento! Tente novamente.');
		// 	else {
		// 		if (confirm('Carregar o compartilhamento?')) {
		// 			localStorage.setItem('compartilhados', JSON.stringify(@Html.Raw(@Model.CompartilhadoConteudo)));				
		// 			mostrarModal('salvar');
		// 		}
		// 	}
		// }

		// if (window.location.href.includes('compartilhado'))
		// 	limparUrl();
	}

	function baixar() {
		const url = 'https://drive.google.com/uc?id=' + '@Model.CompartilhadoNome' + '&export=download';
		getTextFromGoogleDrive(url)
			.then(text => {
				if (text !== null) {
					console.log(text);
					console.log(JSON.stringify(text));

					console.log('Texto do arquivo:', text);
					// Faça algo com o texto aqui
				} else {
					console.log('Falha ao obter o texto do arquivo.');
				}
			});
	}

	async function getTextFromGoogleDrive(url) {
		try {
			const response = await fetch(url);
			const text = await response.text();
			return text;
		} catch (error) {
			console.error('Erro ao buscar o texto do arquivo:', error);
			return null;
		}
	}
</script>

<script src="./assets/js/orgao.js"></script>
<script src="./assets/js/site.js"></script> 
<script src="./assets/js/bateria.js"></script>
<script src="./assets/lib/audioContext/WAAClock.js"></script>
<script src="./assets/lib/audioContext/simple-tracker.js"></script>
<script src="./assets/js/bundle.js"></script>

<!-- <script src="./assets/js/site.min.js"></script> 
<script src="./assets/js/bateria.min.js"></script>
<script src="./assets/js/bundle.min.js"></script>
<script src="./assets/js/orgao.min.js"></script> -->

<script>
    $(window).click(function (e) {
        if (e.target.className === 'w3-modal')
            ocultarModal();
    });

    var div = document.getElementById('bateria');
    var selecionarRitmoElem = document.getElementById("selecionarRitmo");
    var temporizador;

    function showBateria(mostrarBateria) {
        if (mostrarBateria) {
            document.getElementById('container').classList.remove('container');
            document.getElementById('textoBateria').style.color = 'black';
            div.style.display = 'block';
        }
        else {
            document.getElementById('container').classList.add('container');
            div.style.display = 'none';
            document.getElementById('textoBateria').style.color = 'grey';
        }
    }

    function clicarUmBotaoTempo(tempoValor) {
        var bpmElement = document.getElementById('bpm');
        document.getElementById('bpmRange').value = tempoValor;
        bpmElement.value = tempoValor;

        var novoEvento = new Event('change');
        bpmElement.dispatchEvent(novoEvento);
        mudarTempoCompasso(false);
    }

    function escreverRitmo() {
        var tabelaElem = document.getElementById('tracker-table');
        var elementos = document.getElementsByClassName('tracker-enabled');
        var texto = '';

        Array.from(elementos).forEach((elemento) => {
            texto += elemento.innerText + ', ';
        });

        textoRitmo.innerText = texto;
    }

    function playBotaoBateria(botao, tocar = true, levantarBotoes = true) {
        if (!_configurandoTeclas)
            pressionarBotao(botao, levantarBotoes);
    }

    function pressionarBotao(botao, levantarBotoes = true) {
        var botaoPressionadoAntes = document.getElementsByClassName('selecionadoDrum');
        var botaoPressionado = botaoPressionadoAntes.length > 0 ? botaoPressionadoAntes[0] : null;

        // if (botao.id !== 'prato' && botao.id !== 'pratoCravo') {
        // 	if (botao === play_pause_bateria) {
        // 		if (prepararBateriaBotao.style.display !== 'none') {
        // 			prepararBateriaBotao.style.display = 'none';
        // 			pararBateriaBotao.style.display = '';
        // 		} else {
        // 			prepararBateriaBotao.style.display = '';
        // 			pararBateriaBotao.style.display = 'none';
        // 		}
        // 	} else {
        // 		prepararBateriaBotao.style.display = 'none';
        // 		pararBateriaBotao.style.display = '';
        // 	}
        // }

        if (levantarBotoes && botaoPressionado) {
            if (botao === botaoPressionado) {
                fazerViradaBateria();
            } else {
                botaoPressionado.classList.remove('selecionadoDrum');
            }
        }

        if (botao.id === 'prato' || botao.id === 'pratoCravo') {
            //chimesSound.play();
            mudarIconeChimesPrato();
        }

        else if (botao.id !== 'prato' && botao.id !== 'pratoCravo') {
            botao.classList.add('selecionadoDrum');
        }
    }

    function mostrarBateriaConfig(mostrar) {
        if (mostrar) {
            temporizador = setTimeout(function () {
                //bateria.style.display = '';
                document.getElementById('mensagens').style.display = '';
            }, 3000);
        }
        else 
            clearTimeout(temporizador);
    }
</script>

<!-- <script>
    const startButton = document.getElementById('startButton');
    const stopButton = document.getElementById('stopButton');
    let mediaStream;
    let audioContextMic;
    let microphone;
    let destination;

    startButton.addEventListener('click', async () => {
        try {
            mediaStream = await navigator.mediaDevices.getUserMedia({ audio: true });
            audioContextMic = new (window.AudioContext || window.webkitAudioContext)();
            microphone = audioContextMic.createMediaStreamSource(mediaStream);
            destination = audioContextMic.destination;

            // Search bluetooth
            const audioOutputDevice = await navigator.mediaDevices.enumerateDevices()
                .then(devices => devices.find(device => device.kind === 'audiooutput' && device.label.includes('Bluetooth')));
            
            if (audioOutputDevice) {
                await audioPlayback.setSinkId(audioOutputDevice.deviceId);
            }
            /////

            microphone.connect(destination);

            startButton.disabled = true;
            stopButton.disabled = false;
        } catch (err) {
            console.error("Error accessing microphone:", err);
        }
    });

    stopButton.addEventListener('click', () => {
        if (mediaStream) {
            const tracks = mediaStream.getTracks();
            tracks.forEach(track => track.stop());
        }
        if (microphone) microphone.disconnect();
        if (audioContextMic) audioContextMic.close();

        startButton.disabled = false;
        stopButton.disabled = true;
    });

    // teste bluetooth no celular
    // startButton.addEventListener('click', async () => {
    //     try {
    //         mediaStream = await navigator.mediaDevices.getUserMedia({ audio: true });
    //         audioContext = new (window.AudioContext || window.webkitAudioContext)();
    //         microphone = audioContext.createMediaStreamSource(mediaStream);

    //         let outputDevice;

    //         // Tenta encontrar o dispositivo Bluetooth usando getOutputDevices()
    //         try {
    //         const outputDevices = await navigator.mediaDevices.getOutputDevices();
    //         outputDevice = outputDevices.find(device => device.kind === 'audiooutput' && device.label.includes('Bluetooth'));
    //         } catch (error) {
    //         // Se getOutputDevices() não estiver disponível, use a saída padrão
    //         console.warn("getOutputDevices() não está disponível. Usando saída padrão.");
    //         outputDevice = null;
    //         }

    //         // Define a saída de áudio
    //         if (outputDevice) {
    //         // Tenta usar setSinkId()
    //         try {
    //             await microphone.track.setSinkId(outputDevice.deviceId);
    //             destination = audioContext.destination;
    //             microphone.connect(destination);
    //             console.log("Áudio encaminhado para o dispositivo Bluetooth:", outputDevice.label);
    //         } catch (error) {
    //             // Se setSinkId() falhar, usa a saída padrão
    //             console.warn("setSinkId() falhou. Usando saída padrão.");
    //             destination = audioContext.destination;
    //             microphone.connect(destination);
    //         }
    //         } else {
    //         // Se nenhum dispositivo Bluetooth for encontrado, usa a saída padrão
    //         destination = audioContext.destination;
    //         microphone.connect(destination);
    //         console.warn("Nenhum dispositivo Bluetooth encontrado. Usando saída padrão.");
    //         }

    //         startButton.disabled = true;
    //         stopButton.disabled = false;
    //     } catch (err) {
    //         console.error("Error accessing microphone:", err);
    //     }
    //     });
</script> -->
